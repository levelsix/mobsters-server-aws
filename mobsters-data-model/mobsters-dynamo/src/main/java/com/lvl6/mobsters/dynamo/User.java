package com.lvl6.mobsters.dynamo;


import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAutoGeneratedKey;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBHashKey;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBIgnore;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTable;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBVersionAttribute;
import com.lvl6.mobsters.utility.attachment.AtomicExtensibleObject;
import com.lvl6.mobsters.utility.attachment.ExtensibleObject;

@DynamoDBTable(tableName="User")
public class User implements ExtensibleObject {
	private ExtensibleObject attachments;
	
	private String id;
	private Long version;

	private String name;
	private boolean isAdmin;
	private int level;
	private int gems;
	private int cash;
	private int oil;
	private int experience;
	private String clanId;
	

	public User() {
		this.attachments = new AtomicExtensibleObject();
	}
	
	public User(ExtensibleObject attachments) {
		if (attachments == null) {
			this.attachments = new AtomicExtensibleObject();
		} else {
			this.attachments = attachments;
		}
	}
	
	public User(
		String name, boolean isAdmin, int level, int gems, 
		int cash, int oil, int experience, String clanId,
		ExtensibleObject attachments) 
	{
		super();
		this.name = name;
		this.isAdmin = isAdmin;
		this.level = level;
		this.gems = gems;
		this.cash = cash;
		this.oil = oil;
		this.experience = experience;
		this.clanId = clanId;

		if (attachments == null) {
			this.attachments = new AtomicExtensibleObject();
		} else {
			this.attachments = attachments;
		}
	}

	@DynamoDBHashKey(attributeName = "id")
	@DynamoDBAutoGeneratedKey
	public String getId(){return id;}
	
	public void setId(String id){this.id = id;}

	@DynamoDBVersionAttribute
	public Long getVersion(){return version;}
	public void setVersion(Long version){this.version = version;}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public int getLevel() {
		return level;
	}

	public void setLevel(int level) {
		this.level = level;
	}

	public int getGems() {
		return gems;
	}

	public void setGems(int gems) {
		this.gems = gems;
	}

	public int getCash() {
		return cash;
	}

	public void setCash(int cash) {
		this.cash = cash;
	}

	public int getOil() {
		return oil;
	}

	public void setOil(int oil) {
		this.oil = oil;
	}

	public int getExperience() {
		return experience;
	}

	public void setExperience(int experience) {
		this.experience = experience;
	}

	public boolean isAdmin() {
		return isAdmin;
	}

	public void setAdmin(boolean isAdmin) {
		this.isAdmin = isAdmin;
	}

	public String getClanId() {
		return clanId;
	}

	public void setClanId(String clanId) {
		this.clanId = clanId;
	}

	@Override
	@DynamoDBIgnore
	public <T> T getAttachment(Class<T> attachmentClass) {
		return this.attachments.getAttachment(attachmentClass);
	}

	@Override
	public <T> void putAttachment(Class<T> attachmentClass, T attachmentObject) {
		this.attachments.putAttachment(attachmentClass, attachmentObject);
	}

	@Override
	public <T> T clearAttachment(Class<T> attachmentClass) {
		return this.attachments.clearAttachment(attachmentClass);
	}

 	@Override
	public String toString() {
		return "User [id=" + id + ", name=" + name + ", isAdmin=" + isAdmin
				+ ", level=" + level + ", gems=" + gems + ", cash=" + cash
				+ ", oil=" + oil + ", experience=" + experience + ", clanId="
				+ clanId + "]";
	}
	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((id == null) ? 0 : id.hashCode());
		return result;
	}

	@Override
	public boolean equals(Object obj) {
		if (this == obj)
			return true;
		if (obj == null)
			return false;
		if (getClass() != obj.getClass())
			return false;
		User other = (User) obj;
		if (id == null) {
			if (other.id != null)
				return false;
		} else if (!id.equals(other.id))
			return false;
		return true;
	}
}